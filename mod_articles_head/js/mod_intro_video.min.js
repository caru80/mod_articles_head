/**
 * @package        HEAD. Article Module
 * @version        1.8.5
 * 
 * @author         Carsten Ruppert <webmaster@headmarketing.de>
 * @link           https://www.headmarketing.de
 * @copyright      Copyright Â© 2018 HEAD. MARKETING GmbH All Rights Reserved
 * @license        http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
 */
(function(c){c.ModIntroVideo=function(a,b){this.module=c(b);this.module.data("modintrovideo",this);this._init(a)};c.ModIntroVideo.Defaults={evNamespace:".modintro.video",allowTouch:!1,itemSelector:".item"};c.ModIntroVideo.prototype={_init:function(a){this.opt=c.extend(!0,{},c.ModIntroVideo.Defaults,a);this.setup();this.module.on("afterLoad",function(){this.setup()}.bind(this))},setup:function(){for(var a=this.module.find(this.opt.itemSelector),b,d=0,c=a.length;d<c;d++)b=a.eq(d),b.find(".item-introvideo").length&&
(b.off(this.opt.evNamespace),b.on("mouseleave"+this.opt.evNamespace,function(a){this.hideIntroVideo(a.currentTarget)}.bind(this)),b.triggerHandler("mouseleave"));a.find(".item-introvideo.with-full-video").length&&this.bindLightboxes()},bindLightboxes:function(){if(c.featherlight){var a=this.module.find(".item-introvideo.with-full-video");if(a.length)for(var b,d=0,e=a.length;d<e;d++)b=a.eq(d),b.off(this.opt.evNamespace),b.on("click"+this.opt.evNamespace,function(a){a.preventDefault();a='<div class="video-player">   <video class="featherlight-video" autoplay controls volume="70" type="video/mpeg">\t   <source src="'+
c(this).data("fullvideo")+'" type="video/mp4" />   </video></div>';c.featherlight(a,{openSpeed:750})})}else $app&&$app.extensions.list.featherlight&&$app.extensions.list.featherlight.autoload?(console&&console.log("mod_articles_head: Warte auf Featherlight.js von $app."),c($app).one("featherlightReady",function(){this.bindLightboxes()}.bind(this))):console&&console.log("mod_articles_head: Featherlight.js ist nicht installiert.")},hideIntroVideo:function(a){var b=this;a=c(a);var d=a.find(".item-introvideo");
if(d.length&&(d.removeClass("in"),d=d.find("video"),d.length)){d=d.get(0);c(d).attr("autoplay")||(d.pause(),d.currentTime&&(d.currentTime=0));if(!this.opt.allowTouch)a.one("touchstart"+b.opt.evNamespace,function(a){c(this).off("mouseover"+b.opt.evNamespace)});a.one("mouseover"+this.opt.evNamespace,function(a){this.showIntroVideo(a.currentTarget)}.bind(this))}},showIntroVideo:function(a){a=c(a);a=a.find(".item-introvideo");if(a.length){var b=a.find("video");b&&(a.addClass("in"),b.get(0).play())}}};
c.fn.modintrovideo=function(a){var b=c(this).data("modintrovideo");b||(b=new c.ModIntroVideo(a,this));return b}})(jQuery);